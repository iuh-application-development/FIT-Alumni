{% extends "base.html" %}

{% block title %}Hồ sơ - {{ current_user.name }}{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <!-- Profile Header -->
        <div class="col-12">
            <div class="profile-header fade-in">
                <div class="row align-items-center">
                    <div class="col-md-3 text-center">
                        {% if profile and profile.avatar %}
                            <img src="{{ url_for('static', filename='uploads/' + profile.avatar) }}" 
                                 class="profile-avatar" alt="Avatar">
                        {% else %}
                            <div class="profile-avatar-placeholder">
                                <i class="fas fa-user-circle fa-6x"></i>
                            </div>
                        {% endif %}
                    </div>
                    <div class="col-md-9">
                        <h2 class="mb-2">{{ current_user.name }}</h2>
                        <p class="mb-1"><i class="fas fa-envelope me-2"></i>{{ current_user.email }}</p>
                        <p class="mb-1">
                            <i class="fas fa-user-tag me-2"></i>
                            <span class="badge bg-{{ 'danger' if current_user.role == 'admin' else 'success' if current_user.role == 'alumni' else 'primary' }}">
                                {{ 'Quản trị viên' if current_user.role == 'admin' else 'Cựu sinh viên' if current_user.role == 'alumni' else 'Sinh viên' }}
                            </span>
                        </p>
                        <p class="mb-0">
                            <i class="fas fa-calendar-alt me-2"></i>
                            Tham gia từ {{ current_user.created_at.strftime('%d/%m/%Y') }}
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Content -->
        <div class="col-md-4 mt-4">
            <!-- Personal Info Card -->
            <div class="card mb-4 fade-in">
                <div class="card-header d-flex align-items-center">
                    <i class="fas fa-info-circle me-2"></i>
                    <span>Thông tin cá nhân</span>
                </div>
                <div class="card-body">
                    {% if profile %}
                        <div class="info-item mb-3">
                            <label class="text-muted d-block">Số điện thoại</label>
                            <p class="mb-0">{{ profile.phone or 'Chưa cập nhật' }}</p>
                        </div>
                        <div class="info-item mb-3">
                            <label class="text-muted d-block">Địa chỉ</label>
                            <p class="mb-0">{{ profile.address or 'Chưa cập nhật' }}</p>
                        </div>
                        <div class="info-item mb-3">
                            <label class="text-muted d-block">Công ty</label>
                            <p class="mb-0">{{ profile.company or 'Chưa cập nhật' }}</p>
                        </div>
                        <div class="info-item mb-3">
                            <label class="text-muted d-block">Vị trí</label>
                            <p class="mb-0">{{ profile.position or 'Chưa cập nhật' }}</p>
                        </div>
                        <div class="info-item">
                            <label class="text-muted d-block">Giới thiệu</label>
                            <p class="mb-0">{{ profile.bio or 'Chưa cập nhật' }}</p>
                        </div>
                    {% else %}
                        <p class="text-muted mb-0">Chưa cập nhật thông tin</p>
                    {% endif %}
                </div>
            </div>

            <!-- Skills Card -->
            <div class="card fade-in">
                <div class="card-header d-flex align-items-center">
                    <i class="fas fa-tools me-2"></i>
                    <span>Kỹ năng</span>
                </div>
                <div class="card-body">
                    {% if skills %}
                        <div class="d-flex flex-wrap gap-2">
                            {% for skill in skills %}
                                <span class="badge bg-primary">{{ skill.name }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-muted mb-0">Chưa cập nhật kỹ năng</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-8 mt-4">
            <!-- Education Card -->
            <div class="card mb-4 fade-in">
                <div class="card-header d-flex align-items-center">
                    <i class="fas fa-graduation-cap me-2"></i>
                    <span>Học vấn</span>
                </div>
                <div class="card-body">
                    {% if education %}
                        {% for edu in education %}
                            <div class="education-item mb-4">
                                <h5 class="mb-1">{{ edu.school }}</h5>
                                <p class="text-muted mb-1">{{ edu.major }}</p>
                                <p class="text-muted mb-0">
                                    {{ edu.start_date }} - {{ edu.end_date }}
                                </p>
                            </div>
                            {% if not loop.last %}
                                <hr>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <p class="text-muted mb-0">Chưa cập nhật thông tin học vấn</p>
                    {% endif %}
                </div>
            </div>

            <!-- Experience Card -->
            <div class="card fade-in">
                <div class="card-header d-flex align-items-center">
                    <i class="fas fa-briefcase me-2"></i>
                    <span>Kinh nghiệm làm việc</span>
                </div>
                <div class="card-body">
                    {% if experience %}
                        {% for exp in experience %}
                            <div class="experience-item mb-4">
                                <h5 class="mb-1">{{ exp.position }}</h5>
                                <p class="text-muted mb-1">{{ exp.company }}</p>
                                <p class="text-muted mb-1">
                                    {{ exp.start_date }} - {{ exp.end_date }}
                                </p>
                                <p class="mb-0">{{ exp.description }}</p>
                            </div>
                            {% if not loop.last %}
                                <hr>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <p class="text-muted mb-0">Chưa cập nhật kinh nghiệm làm việc</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 